<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= pageTitle %></title>
	<link href="https://fonts.googleapis.com/css2?family=Risque&family=Roboto:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/app.css">
    <link rel="shortcut icon" href="favicon.ico" />
</head>
<body>
	<div class="game-bg">
		<img src="pics/bg.jpg">
	</div>

	<div class="game-modal" style="opacity: 0">
		<div class="game-modal__bg"></div>
		<div class="card">
			<img class="game-modal__logo" src="pics/love-letter-logo.png" alt="Love Letter Game">
			<div id="modal-welcome" class="game-modal__content active">
				<h2 class="game-modal__title">Welcome!</h2>
				<h3 class="game-modal__subtitle">Please enter your nickname</h3>
				<div class="game-modal__input-area" id="modal-nickname">
					<input type="text" name="nickname">
					<button>Enter</button>
				</div>
			</div>
			<div id="modal-menu" class="game-modal__content hidden">
				<h2 class="game-modal__title" id="modal-menu-welcome"></h2>
				<div class="game-modal__input-area">
					<button id="modal-menu-create" class="button" style="margin-right: 10px;">Create a game room</button>
					<button id="modal-menu-enter" class="button">Enter a game room</button>
				</div>
			</div>
			<div id="modal-create" class="game-modal__content hidden">
				<h2 class="game-modal__title">Create a game room</h2>
				<div class="game-modal__double">
					<div class="game-modal__double__item">
						<h3 class="game-modal__subtitle">Number of players</h3>
						<div class="game-modal__input-area game-modal__button-bundle">
							<button id="modal-create-2" class="active">2</button>
							<button id="modal-create-3">3</button>
							<button id="modal-create-4">4</button>
						</div>
					</div>
					<div class="game-modal__double__item">
						<h3 class="game-modal__subtitle">Room</h3>
						<div class="game-modal__toggler__wrapper" id="room-open-closed-wrapper">
			              <button class="game-modal__toggler__button" id="room-open-closed-button">
			                <div class="game-modal__toggler"></div>
			              </button>
			              <span class="game-modal__toggler__status" id="room-open-closed-status">Closed</span>
			            </div>
					</div>
				</div>
				<div class="game-modal__input-area">
					<button class="button" id="create-room-button">Create!</button>
				</div>
			</div>
			<div id="modal-enter" class="game-modal__content hidden">
				<h2 class="game-modal__title">Enter a game room</h2>
				<h3 class="game-modal__subtitle">Enter the room code</h3>
				<div class="game-modal__input-area" id="modal-enter-code">
					<input type="text" name="nickname" maxlength="30">
					<button>Enter</button>
				</div>
			</div>
			<div id="modal-error" class="game-modal__content hidden">
				<h2 class="game-modal__title">Something went wrong :(</h2>
				<h3 class="game-modal__subtitle">Server says</h3>
				<div class="game-modal__input-area flex-column" id="modal-error-message">
					<p></p>
					<button class="button">Reload</button>
				</div>
			</div>
			<div id="modal-room" class="game-modal__content game-modal__room hidden">
				<h2 class="game-modal__room__title">Room code</h2>
				<h3 class="game-modal__room__subtitle" id="modal-room-code">000000</h3>
				<div class="game-modal__room__table" id="modal-room-table">
					<div class="game-modal__room__table__item">
						<div class="game-modal__room__table__item__left">
							<span>monochroumme</span>
							<div class="game-modal__room__table__item__hearts">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
							</div>
						</div>
						<div class="game-modal__room__table__item__right">
							<div class="beam">
								<div class="popup">
									<span>Not ready</span>
								</div>
							</div>
						</div>
					</div>
					<div class="line"></div>
					<div class="game-modal__room__table__item">
						<div class="game-modal__room__table__item__left">
							<span>ruf</span>
							<div class="game-modal__room__table__item__hearts">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
							</div>
						</div>
						<div class="game-modal__room__table__item__right">
							<div class="beam">
								<div class="popup">
									<span>Ready</span>
								</div>
							</div>
						</div>
					</div>
					<div class="line"></div>
					<div class="game-modal__room__table__item">
						<div class="game-modal__room__table__item__left">
							<span>covid</span>
							<div class="game-modal__room__table__item__hearts">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
							</div>
						</div>
						<div class="game-modal__room__table__item__right">
							<div class="beam">
								<div class="popup">
									<span>Not ready</span>
								</div>
							</div>
						</div>
					</div>
					<div class="line"></div>
					<div class="game-modal__room__table__item">
						<div class="game-modal__room__table__item__left">
							<span>magic</span>
							<div class="game-modal__room__table__item__hearts">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
								<img src="pics/token-bunfilled.svg">
							</div>
						</div>
						<div class="game-modal__room__table__item__right">
							<div class="beam">
								<div class="popup">
									<span>Not ready</span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="game-modal__input-area">
					<button class="button" id="modal-room-ready">Ready!</button>
				</div>
			</div>
		</div>
	</div>
	<div class="content">
		<div class="player-top">
			<div class="cards top">
				<div class="card hidable" id="player-top-card2">
					<% if (playerTop.card1) { %>
						<img src="pics/card-0.png">
					<% } %>
				</div>
				<div class="card hidable" id="player-top-card1">
					<% if (playerTop.card2) { %>
						<img src="pics/card-0.png">
					<% } %>
				</div>
			</div>
			<div class="board__user-info flipped">
				<h2 class="board__nickname hidable" id="player-top-nickname"><%= playerTop.nickname %></h2>
				<div class="board__tokens hidable" id="player-top-tokens">
					<% for (let i = 0; i < maxTokens; i++) { %>
						<% if (i < playerTop.tokens) { %>
							<img src="pics/token-filled.svg">
						<% } else { %>
							<img src="pics/token-unfilled.svg">
						<% } %>
					<% } %>
				</div>
			</div>
		</div>

		<% if (playerRight) { %>
			<div class="player-right" id="player-right">
				<div class="board__user-info rtl">
					<h2 class="board__nickname hidable" id="player-right-nickname"><%= playerRight.nickname %></h2>
					<div class="board__tokens hidable" id="player-right-tokens">
						<% for (let i = 0; i < maxTokens; i++) { %>
							<% if (i < playerRight.tokens) { %>
								<img src="pics/token-filled.svg">
							<% } else { %>
								<img src="pics/token-unfilled.svg">
							<% } %>
						<% } %>
					</div>s
				</div>
				<div class="cards right">
					<div class="card hidable" id="player-right-card2">
						<% if (playerRight.card1) { %>
							<img src="pics/card-0.png">
						<% } %>
					</div>
					<div class="card hidable" id="player-right-card1">
						<% if (playerRight.card2) { %>
							<img src="pics/card-0.png">
						<% } %>
					</div>
				</div>
			</div>
		<% } %>

		<div class="player-bottom">
			<div class="board__user-info">
				<h2 class="board__nickname hidable" id="player-bottom-nickname"><%= playerBottom.nickname %></h2>
				<div class="board__tokens hidable" id="player-bottom-tokens">
					<% for (let i = 0; i < maxTokens; i++) { %>
						<% if (i < playerBottom.tokens) { %>
							<img src="pics/token-filled.svg">
						<% } else { %>
							<img src="pics/token-unfilled.svg">
						<% } %>
					<% } %>
				</div>
			</div>
			<div class="cards bottom">
				<div class="card in-hand hidable" id="player-bottom-card1">
					<% if (playerBottom.card1) { %>
						<img src="pics/card-<%= playerBottom.card1 %>.png">
					<% } %>	
				</div>
				<div class="card in-hand hidable" id="player-bottom-card2">
					<% if (playerBottom.card2) { %>
						<img src="pics/card-<%= playerBottom.card2 %>.png">
					<% } %>	
				</div>
			</div>
		</div>

		<% if (playerLeft) { %>
			<div class="player-left" id="player-left">
				<div class="board__user-info ltr">
					<h2 class="board__nickname hidable" id="player-left-nickname"><%= playerLeft.nickname %></h2>
					<div class="board__tokens hidable" id="player-left-tokens">
						<% for (let i = 0; i < maxTokens; i++) { %>
							<% if (i < playerLeft.tokens) { %>
								<img src="pics/token-filled.svg">
							<% } else { %>
								<img src="pics/token-unfilled.svg">
							<% } %>
						<% } %>
					</div>s
				</div>
				<div class="cards left">
					<div class="card hidable" id="player-left-card1">
						<% if (playerLeft.card1) { %>
							<img src="pics/card-0.png">
						<% } %>
					</div>
					<div class="card hidable" id="player-left-card2">
						<% if (playerLeft.card2) { %>
							<img src="pics/card-0.png">
						<% } %>
					</div>
				</div>
			</div>
		<% } %>

		<div class="deck">
			<div class="deck-left">
				<% for (let i = 0; i < deck.cardsDismissed.length; i++) { %>
					<div class="card hidable" style="z-index: <%= deck.cardsDismissed.length - i %>">
						<img src="pics/card-<%= deck.cardsDismissed[i] %>.png">
					</div>
				<% } %>
			</div>
			<div class="deck-center">
				<% for (let i = 0; i < deck.cardsInDeck; i++) { %>
					<div class="card hidable" style="z-index: <%= i %>">
						<img src="pics/card-0.png">
					</div>
				<% } %>
			</div>
			<div class="deck-right">
				<% for (let i = 0; i < deck.cardsPlayed.length; i++) { %>
					<div class="card hidable" style="z-index: <%= i %>">
						<img src="pics/card-<%= deck.cardsPlayed[i] %>.png">
					</div>
				<% } %>
			</div>
		</div>
	</div>

	<div class="chat" id="chat-window">
		<div class="chat__top__wrapper" id="chat-wrapper">
			<div class="chat__top" id="chat"></div>
		</div>
		<div class="chat__line"></div>
		<div class="chat__bottom">
			<input id="chat-input" maxlength="300" placeholder="Type...">
		</div>
	</div>

	<script src="/socket.io/socket.io.js"></script>
	<script type="text/javascript" src="js/modal.js"></script>
	<script type="text/javascript" src="js/chat.js"></script>
	<script type="text/javascript" src="js/game.js"></script>
	<% if (room) { %>
		<script type="text/javascript" src="js/room.js"></script>
	<% } %>
</body>
</html>
